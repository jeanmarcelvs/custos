<!doctype html>
<html lang="pt-BR">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>GDIS — Projeto</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <div class="container">
        <div class="loading-overlay oculto" id="loading-overlay">
            <div class="spinner"></div>
        </div>
        <div id="project-search-container" class="login-wrapper oculto">
            <form id="project-search-form" class="login-card">
                <h1 class="login-title">Consultar Projeto</h1>
                <div class="form-content">
                    <label for="project-id-input">ID do Projeto</label>
                    <input type="text" id="project-id-input" placeholder="Digite o ID do projeto..." required>
                    <button type="submit" class="btn w-full">Consultar</button>
                </div>
                <div class="form-footer mt-2">
                    <div class="user-info">
                        <i class="fas fa-user"></i>
                        <span id="username-search"></span>
                    </div>
                    <button id="btn-logout-search" class="btn-ghost" title="Sair">Sair</button>
                </div>
            </form>
        </div>
        <div id="project-details-container" class="oculto">
            <header class="site-header">
                <div class="header-content">
                    <!-- Coluna da Esquerda: Informações do Projeto -->
                    <div class="header-project-info">
                        <h1 id="proj-title">Projeto</h1>
                        <div class="project-meta">
                            <span id="client-name-placeholder">Carregando...</span>
                            <span class="separator">|</span>
                            <span id="info-data">—</span>
                        </div>
                    </div>

                    <!-- Coluna Central: Ações da Página -->
                    <div class="header-page-actions">
                        <button id="btn-search-page" class="btn-ghost" title="Consultar outro projeto"><i class="fas fa-search"></i> Consultar</button>
                        <button id="btn-report-page" class="btn-ghost" title="Visualizar Relatório"><i class="fas fa-file-alt"></i> Relatório</button>
                        <button id="btn-edit-page" class="btn">Editar Custos</button>
                    </div>

                    <!-- Coluna da Direita: Ações do Usuário -->
                    <div class="header-user-actions">
                        <div class="user-info">
                            <i class="fas fa-user"></i>
                            <span id="username-details"></span>
                        </div>
                        <button id="btn-logout" class="btn-ghost" title="Sair">Sair</button>
                    </div>
                </div>
            </header>
            <section id="kpi-principais" class="kpi-grid">
                <div class="kpi">
                    <small>Total Projeto</small>
                    <div class="value" id="val-total-projeto">R$ 0,00</div>
                </div>
                <div class="kpi">
                    <small>Total Kit</small>
                    <div class="value" id="val-kit">R$ 0,00</div>
                </div>
                <div class="kpi kpi-gdis">
                    <small>Total GDIS</small>
                    <div class="value" id="val-gdis">R$ 0,00</div>
                </div>
                <div class="kpi">
                    <small>Total Custos</small>
                    <div class="value" id="val-custos">R$ 0,00</div>
                </div>
                <div class="kpi">
                    <small>Lucro Bruto</small>
                    <div class="value" id="val-lucro-sem-imposto">R$ 0,00</div>
                </div>
                <div class="kpi">
                    <small>Imposto</small>
                    <div class="value" id="val-imposto">R$ 0,00</div>
                </div>
                <div class="kpi">
                    <small>Lucro Líquido</small>
                    <div class="value" id="val-lucro-com-imposto">R$ 0,00</div>
                </div>
            </section>
            <section class="card">
                <div class="overview">
                    <div>
                        <h3 class="muted">Resumo de Custos</h3>
                    </div>
                </div>
                <div class="breakdown">
                    <div class="item">
                        <h4>Material</h4>
                        <p id="break-material">R$ 0,00</p>
                    </div>
                    <div class="item">
                        <h4>Diárias / M.O.</h4>
                        <p id="break-diarias">R$ 0,00</p>
                    </div>
                    <div class="item">
                        <h4>Combustível</h4>
                        <p id="break-combustivel">R$ 0,00</p>
                    </div>
                    <div class="item">
                        <h4>Outras</h4>
                        <p id="break-outras">R$ 0,00</p>
                    </div>
                </div>
            </section>

            <!-- ==========================================================================
                 SEÇÃO DE DOCUMENTOS DO PROJETO
                 ========================================================================== -->
            <section id="documentos-projeto-container" class="card oculto">
                <div class="overview">
                    <div>
                        <h3 class="muted">Documentos do Projeto</h3>
                    </div>
                </div>
                <div id="documentos-projeto-list" class="document-list">
                    <!-- 
                        O conteúdo da lista de documentos será gerado dinamicamente pelo projeto-controller.js.
                        A estrutura será uma grade de miniaturas e ícones.
                    -->
                </div>
            </section>

            <!-- ==========================================================================
                 SEÇÃO DE EDIÇÃO DE CUSTOS (INICIALMENTE OCULTA)
                 ========================================================================== -->
            <section id="edit-costs-section" class="card oculto">
                <div class="edit-header">
                    <h2>Editar Custos</h2>
                    <button id="btn-close-edit" class="btn-ghost" title="Fechar edição">&times; Fechar</button>
                </div>

                <!-- Início da Seção de Abas para Edição de Custos -->
                <div class="tab-container">
                    <!-- Estes são os "botões" das abas -->
                    <div class="tab-header">
                        <button class="tab-link active" data-tab="tab-material">Material</button>
                        <button class="tab-link" data-tab="tab-mo">M.O.</button>
                        <button class="tab-link" data-tab="tab-combustivel">Combustível</button>
                        <button class="tab-link" data-tab="tab-outros">Outros</button>
                    </div>

                    <!-- Este é o conteúdo que muda conforme a aba selecionada -->
                    <div class="tab-content-wrapper">
                        <div id="tab-material" class="tab-content active">
                            <h3>Custos de Material</h3>
                            <p>Formulário para editar custos de material...</p>
                        </div>
                        <div id="tab-mo" class="tab-content">
                            <h3>Custos de Mão de Obra</h3>
                            <p>Formulário para editar diárias e mão de obra...</p>
                        </div>
                        <div id="tab-combustivel" class="tab-content">
                            <h3>Custos de Combustível</h3>
                            <p>Formulário para editar custos de combustível...</p>
                        </div>
                        <div id="tab-outros" class="tab-content">
                            <h3>Outros Custos</h3>
                            <p>Formulário para editar outros custos...</p>
                        </div>
                    </div>
                </div>
                <!-- Fim da Seção de Abas -->
            </section>
        </div>
    </div>

    <!-- ==========================================================================
         LIGHTBOX (MODAL) PARA VISUALIZAÇÃO DE IMAGENS
         ========================================================================== -->
    <div id="image-lightbox" class="lightbox oculto">
        <div id="lightbox-overlay" class="lightbox-overlay"></div>
        <div class="lightbox-main-area">
            <div class="lightbox-image-wrapper">
                <img id="lightbox-image" src="" alt="Visualização de imagem">
            </div>
            <div class="lightbox-controls">
                <a id="lightbox-download" href="#" download class="btn">Baixar</a>
            </div>
        </div>
        <button id="lightbox-close" class="lightbox-button close" title="Fechar (Esc)">&times;</button>
        <button id="lightbox-prev" class="lightbox-button prev" title="Anterior (←)">&#10094;</button>
        <button id="lightbox-next" class="lightbox-button next" title="Próxima (→)">&#10095;</button>
    </div>
    <script type="module" src="./js/projeto-controller.js"></script>
</body>

</html>
